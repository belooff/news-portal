version: '2.1'
services: 
  
  redis:
    container_name: redis
    image: redis
    ports: 
      - 6379:6379
    healthcheck:
      test: exit 0

  rabbitmq:
    image: rabbitmq
    build: ./queue
    ports:
      - 15672:15672
      - 5672:5672
    restart: always

  querydb_famous:
    image: querydb_famous
    build: ./famous_news_service/query_db/
    ports: 
      - 5433:5432
    restart: always

  commanddb_famous:
    image: commanddb_famous
    build: ./famous_news_service/command_db/
    ports: 
      - 27017:27017
    restart: always
    healthcheck:
      test: exit 0
